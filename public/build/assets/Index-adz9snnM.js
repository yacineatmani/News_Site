import{K as c,r as m,j as e,$ as r,S as d}from"./app-CwlvKQfy.js";import{A as h}from"./AppLayout-BBPJmVwY.js";import"./ThemeToggle-CGnQ3XP8.js";function f(){const{articles:i,auth:t}=c().props,[n,l]=m.useState(null),o=async s=>{if(!t.user){d.visit(route("login"));return}l(s);try{await d.post(route("articles.like",s),{},{preserveState:!0,preserveScroll:!0,onFinish:()=>l(null)})}catch(a){l(null),console.error("Erreur lors du like:",a)}},x=s=>{confirm("Êtes-vous sûr de vouloir supprimer cet article ?")&&d.delete(route("articles.destroy",s))};return e.jsx(h,{children:e.jsxs("div",{className:"py-8 px-4 sm:px-6 lg:px-8 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:["Articles (",i.data.length,")"]}),t.user&&["auteur","admin","webmaster"].includes(t.user.role)&&e.jsx(r,{href:route("articles.create"),className:"inline-block px-6 py-3 bg-indigo-600 text-white rounded-lg font-semibold hover:bg-indigo-700 transition transform hover:-translate-y-1",children:"✍️ Créer un article"})]}),i.data.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:"📰"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Aucun article pour le moment"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"Soyez le premier à publier un article !"}),t.user&&["auteur","admin","webmaster"].includes(t.user.role)&&e.jsx(r,{href:route("articles.create"),className:"inline-block px-6 py-3 bg-indigo-600 text-white rounded-lg font-semibold hover:bg-indigo-700 transition",children:"Publier le premier article"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:i.data.map(s=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden transform transition hover:shadow-lg hover:-translate-y-1",children:[e.jsxs("div",{className:"w-full h-48 bg-gray-200 dark:bg-gray-700 relative group",children:[s.image?e.jsx(r,{href:route("articles.show",s.id),children:e.jsx("img",{src:s.image.startsWith("http")?s.image:`/storage/${s.image}`,alt:s.title,className:"w-full h-full object-cover rounded-t-xl group-hover:opacity-90 transition",onError:a=>{a.currentTarget.src="https://via.placeholder.com/400x200?text=Image+non+disponible"}})}):e.jsx(r,{href:route("articles.show",s.id),children:e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 dark:text-gray-500 group-hover:text-indigo-500 transition",children:e.jsx("span",{className:"text-5xl",children:"📰"})})}),e.jsx("div",{className:"absolute top-2 left-2",children:e.jsx("span",{className:"inline-block px-2 py-1 bg-indigo-600 text-white text-xs font-semibold rounded-full",children:s.category.name})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx(r,{href:route("articles.show",s.id),className:"text-xl font-semibold text-gray-900 dark:text-white hover:text-indigo-600 dark:hover:text-indigo-400 transition line-clamp-2 mb-3 block",children:s.title}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4 line-clamp-3",children:[s.content.substring(0,150),"..."]}),s.tags&&s.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:s.tags.slice(0,3).map(a=>e.jsxs("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs font-medium rounded-full",children:["#",a.name]},a.id))}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:[e.jsxs("span",{children:["Par ",s.user.name]}),e.jsx("span",{className:"mx-2",children:"•"}),e.jsx("span",{children:new Date(s.created_at).toLocaleDateString("fr-FR")})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>o(s.id),disabled:n===s.id,className:`flex items-center gap-1 text-sm font-medium transition ${s.user_has_liked?"text-red-600 hover:text-red-700":"text-gray-500 hover:text-red-600"} ${n===s.id?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx("span",{className:`transition-transform ${n===s.id?"animate-pulse":"hover:scale-110"}`,children:s.user_has_liked?"❤️":"🤍"}),e.jsx("span",{children:s.likes_count})]}),e.jsxs(r,{href:route("articles.show",s.id),className:"flex items-center gap-1 text-sm font-medium text-gray-500 hover:text-indigo-600 transition",children:[e.jsx("span",{children:"💬"}),e.jsx("span",{children:s.comments_count})]})]}),t.user&&(["admin","webmaster"].includes(t.user.role)||t.user.id===s.user.id)&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(r,{href:route("articles.edit",s.id),className:"text-sm text-blue-600 hover:text-blue-800 p-1 rounded transition",title:"Modifier",children:"✏️"}),e.jsx("button",{onClick:()=>x(s.id),className:"text-sm text-red-600 hover:text-red-800 p-1 rounded transition",title:"Supprimer",children:"🗑️"})]})]})]})]},s.id))})]})})}export{f as default};
