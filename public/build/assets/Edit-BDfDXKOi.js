import{K as g,m as u,j as e,$ as p}from"./app-CwlvKQfy.js";import{A as h}from"./AppLayout-BBPJmVwY.js";import"./ThemeToggle-CGnQ3XP8.js";function f(){const{article:a,categories:d,tags:n}=g().props,{data:s,setData:l,post:o,errors:r,processing:i}=u({title:a.title||"",content:a.content||"",image:null,category_id:String(a.category_id||""),tags:a.tags?a.tags.map(t=>t.id):[],_method:"patch"});function c(t){t.preventDefault(),console.log("Données à envoyer:",s),o(route("articles.update",a.id),{forceFormData:!0,preserveScroll:!0})}return e.jsx(h,{children:e.jsxs("div",{className:"py-10 px-4 sm:px-6 lg:px-8 max-w-3xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-6",children:"Modifier un article"}),e.jsxs("form",{onSubmit:c,className:"space-y-6 bg-white dark:bg-gray-800 p-8 rounded-xl shadow-lg",children:[e.jsx("div",{className:"w-full h-64 bg-gray-200 dark:bg-gray-700 rounded-lg overflow-hidden",children:a.image?e.jsx("img",{src:a.image.startsWith("http")?a.image:`/storage/${a.image}`,alt:a.title,className:"w-full h-full object-cover",onError:t=>{t.currentTarget.src="https://via.placeholder.com/600x300?text=Image+non+disponible"}}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 dark:text-gray-500",children:"Aucune image disponible"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nouvelle image (optionnel)"}),e.jsx("input",{type:"file",accept:"image/*",onChange:t=>l("image",t.target.files?t.target.files[0]:null),className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Laissez vide pour conserver l'image actuelle"}),r.image&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:r.image})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Titre *"}),e.jsx("input",{type:"text",value:s.title,onChange:t=>l("title",t.target.value),placeholder:"Titre de l'article",className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2",required:!0}),r.title&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:r.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Contenu *"}),e.jsx("textarea",{value:s.content,onChange:t=>l("content",t.target.value),placeholder:"Contenu de l'article",className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 min-h-[150px]",required:!0}),r.content&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:r.content})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Catégorie *"}),e.jsxs("select",{value:s.category_id,onChange:t=>l("category_id",t.target.value),className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2",required:!0,children:[e.jsx("option",{value:"",children:"Choisir une catégorie"}),d.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),r.category_id&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:r.category_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Tags (optionnel)"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:n.map(t=>e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",value:t.id,checked:s.tags.includes(t.id),onChange:x=>{x.target.checked?l("tags",[...s.tags,t.id]):l("tags",s.tags.filter(m=>m!==t.id))},className:"h-4 w-4 text-indigo-600"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:t.name})]},t.id))}),r.tags&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:r.tags})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"submit",disabled:i,className:"bg-indigo-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-indigo-700 transition disabled:opacity-50",children:i?"Enregistrement...":"Enregistrer les modifications"}),e.jsx(p,{href:route("articles.index"),className:"inline-block px-6 py-3 text-indigo-600 hover:text-indigo-800 transition",children:"Retour à la liste"})]})]})]})})}export{f as default};
